## 图片服务器概述

对同一张图片要剪裁出不同尺寸的图片来满足不同分辨率的设备。有两种方案：

1，在图片上传后通过“管理系统”剪裁，配置。该方案如果要自研的话成本还是较高的，因为需要建立在成熟的文件存储方案之上开发出对应的图片管理GUI。除此之外可以在用户将图片上传到服务器后由server端自行剪裁，虽然实际功能和上述一致，但是省去了GUI的开发会简单不少。图片剪裁是单独的一个功能，不隶属于图片服务器，选择对应平台较成熟的图片处理库，并定义好文件命名规则，存储路径后，将不同尺寸的图片文件存储在规则定义的位置，用户请求带上图片尺寸参数返回给其对应的图片文件即可。

2，上述方案对于服务器的存储压力较大，可以只存原图，在用户请求时再对图片进行处理返回给其需要的尺寸图。虽然可以减轻服务器存储压力，但是面对高并发请求时图片处理会消耗很多cpu的性能，这未必是一个好的方案。



当数据量上升时普通的文件系统会成为瓶颈，此时需要一些别的手段。

1，使用第三方图床，将图片上传到第三方图床生成对应的url，直接使用图片外链。但是用户难自动化，批量化，存储容量以及访问速度也会受到限制，仅适合较小的个人项目。

2，自己搭建图床，将一些开源图床系统下载并搭建在自己的服务器上。和1的方式没有太大区别，如果没有开放的api较难与自己的服务端集成，不过容量和访问速度相对1来说更可控，且不用担心数据泄露等问题。

3，使用开源的存储方案如minio，zimg。这些相对于开源图床更加底层，所以一般都可与对应平台的后端项目对接集成。缺点就是功能相对单一，因为它不是针对图片的解决方案，所以如果要做图片剪裁等功能还需要集成其他模块，且没有较好的UI系统。

4，第三方云+cdn，如七牛云，阿里云等，这些成熟的第三方云一般都会提供图片服务器和CDN，如果资金充足推荐选择。缺点就是第三方的东西不可控。

5，oss（object storage service）或者 s3（simple storage service)  存储方案，与4类似，但是更为底层和开放。



ps：nginx自带的image filter也可以满足中小项目的图片尺寸方案

https://www.jianshu.com/p/abb5db4c2e4a